{"mappings":"MAEO,MAAMA,EAAY,KACvB,MAAMC,EAAKC,SAASC,cAAc,UAC9BF,GAAIA,EAAGG,cAAcC,YAAYJ,EAAG,EAI7BK,EAAY,CAACC,EAAMC,KAC9BR,IACA,MAAMS,EAAS,4BAA4BF,MAASC,UACpDN,SAASC,cAAc,QAAQO,mBAAmB,aAAcD,GAChEE,OAAOC,WAAWZ,EAAW,IAAK,ECsB9Ba,EAAYX,SAASC,cAAc,4BAqBzCU,GAAaA,EAAUC,iBAAiB,SAnBlBC,UAClB,IACA,MAAMC,QAAYC,MAAO,4CAA8C,CACrEC,OAAO,QAETC,QAAQC,IAAIJ,GACRA,EAAIK,SAASC,OAAS,UACxBhB,EAAU,OAAO,cACjBK,OAAOC,YAAW,KAChBW,SAASC,OAAO,IAAI,GACnB,K,CAEJ,MAAMC,GACTN,QAAQC,IAAIK,EAAIC,S,CAGhBP,QAAQC,IAAI,0BAA0B,G","sources":["public/js/alerts.js","public/js/login.js"],"sourcesContent":["/* eslint-disable */\r\n\r\nexport const hideAlert = () => {\r\n  const el = document.querySelector('.alert');\r\n  if (el) el.parentElement.removeChild(el);\r\n};\r\n\r\n// type is 'success' or 'error'\r\nexport const showAlert = (type, msg) => {\r\n  hideAlert();\r\n  const markup = `<div class=\"alert alert--${type}\">${msg}</div>`;\r\n  document.querySelector('body').insertAdjacentHTML('afterbegin', markup);\r\n  window.setTimeout(hideAlert, 5000);\r\n};\r\n","/* eslint-disable */\r\n\r\n  import {showAlert}  from './alerts'\r\n export const login = async (email, password) => {\r\n  console.log(email, password);\r\n  try {\r\n    const res = await fetch('http://localhost:3000/api/v1/users/login', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify({ email, password }),\r\n    });\r\n\r\n    const json = await res.json();\r\n    if (json.status === 'success') {\r\n      showAlert('success','Logged in successfully!');\r\n      window.setTimeout(() => {\r\n        location.assign('/');\r\n      }, 1500);\r\n    }\r\n  } catch (err) {\r\n    showAlert('error','Incorrect email or password');\r\n  }\r\n};\r\n\r\n// document.querySelector('.form').addEventListener('submit', (e) => {\r\n//   e.preventDefault();\r\n\r\n//   const email = document.getElementById('email').value;\r\n//   const password = document.getElementById('password').value;\r\n//   login(email, password);\r\n// });\r\n\r\nconst logOutBtn = document.querySelector('.nav__el.nav__el--logout');\r\n\r\nexport const logout = async () => {\r\n    try{\r\n    const res = await fetch( 'http://localhost:3000/api/v1/users/logout',  {\r\n      method:'GET'\r\n    })\r\n    console.log(res);\r\n    if (res.formData.status = 'success') {\r\n      showAlert('info','logged out');\r\n      window.setTimeout(() => {\r\n        location.assign('/');\r\n      }, 1500);\r\n    }\r\n   } catch(err){\r\n  console.log(err.response)\r\n  }\r\n\r\n  console.log('log out function called');\r\n};\r\n\r\nlogOutBtn && logOutBtn.addEventListener('click', logout);\r\n"],"names":["$e6adfa685459127e$export$516836c6a9dfc573","el","document","querySelector","parentElement","removeChild","$e6adfa685459127e$export$de026b00723010c1","type","msg","markup","insertAdjacentHTML","window","setTimeout","$94464591c703bfdb$var$logOutBtn","addEventListener","async","res","fetch","method","console","log","formData","status","location","assign","err","response"],"version":3,"file":"login.js.map"}